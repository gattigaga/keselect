!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.Keselect=t():e.Keselect=t()}(window,(function(){return function(e){var t={};function n(o){if(t[o])return t[o].exports;var r=t[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(o,r,function(t){return e[t]}.bind(null,r));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=2)}([function(e,t){function n(e,t,n){var o,r,s,i,l;function a(){var c=Date.now()-i;c<t&&c>=0?o=setTimeout(a,t-c):(o=null,n||(l=e.apply(s,r),s=r=null))}null==t&&(t=100);var c=function(){s=this,r=arguments,i=Date.now();var c=n&&!o;return o||(o=setTimeout(a,t)),c&&(l=e.apply(s,r),s=r=null),l};return c.clear=function(){o&&(clearTimeout(o),o=null)},c.flush=function(){o&&(l=e.apply(s,r),s=r=null,clearTimeout(o),o=null)},c}n.debounce=n,e.exports=n},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var o=n(0);function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var c=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};l(this,e);var o=t instanceof HTMLElement;if(!o)throw new Error("Passed element is not a valid HTML element.");this._options=s({isDisabled:!1,onSearch:null,onDropdownOpen:null,onDropdownClose:null},n),this._elements={$origin:t},this._items=[],this._isDestroyed=!1,this._initialize()}var t,n,r;return t=e,(n=[{key:"_initialize",value:function(){var e=this;this._elements=s(s({},this._elements),this._createBaseElements()),this._items=this._getItemsFromOrigin();var t=this._options,n=t.isDisabled,r=t.onSearch,i=this._elements,l=i.$container,a=i.$search,c=i.$dropdown,d=i.$selected,u=i.$message,p=i.$origin,_=Object.values(p.options),f=!!r;if(f){var h=_.find((function(e,t){return!t})),v=h?h.label:"",m=h&&!h.value;this._showPlaceholder(m),d.textContent=v,u.textContent="Enter a keyword to find options",p.querySelectorAll("option").forEach((function(e,t){t&&e.remove()}))}else{var w=this._items[p.selectedIndex],y=!!w&&""===w.value,g=w?w.label:"";this._showPlaceholder(y),d.textContent=g,u.textContent="No data available",this._createItemElements(this._items)}n&&(this._showPlaceholder(),p.disabled=!0),l.addEventListener("click",(function(){if(!n){var t=c.classList.contains("keselect__dropdown--show");t||(a.value="",e._showMessage(!e._items.length),e._removeItemElements(),e._createItemElements(e._items)),e._openDropdown(!t)}})),c.addEventListener("click",(function(e){e.stopPropagation()})),a.addEventListener("input",(function(t){var n=t.target.value;if(f)n.length>=1?(u.textContent="Searching...",e._showMessage(),e._removeItemElements(),Object(o.debounce)((function(){r(n,(function(t){u.textContent="No data available",e._removeItemElements(),e._createItemElements(t),e._showMessage(!t.length)}))}),500)()):(u.textContent="Enter a keyword to find options",e._removeItemElements(),e._showMessage());else{var s=e._items.filter((function(e){return new RegExp(n,"ig").test(e.label)}));e._removeItemElements(),e._createItemElements(s),e._showMessage(!s.length)}})),document.addEventListener("keyup",(function(t){27===t.keyCode&&e._openDropdown(!1)})),document.addEventListener("click",(function(t){!l.contains(t.target)&&e._openDropdown(!1)}))}},{key:"_getItemsFromOrigin",value:function(){var e=this._elements.$origin,t=!!this._options.onSearch;return Object.values(e.options).filter((function(){return!t})).map((function(e,t){return{index:t,label:e.label,value:e.value}}))}},{key:"_createBaseElements",value:function(){var e=this._elements.$origin,t=document.createElement("div");t.classList.add("keselect__container"),t.innerHTML='\n      <div class="keselect__selected-wrapper">\n        <p class="keselect__selected"></p>\n        <span class="keselect__arrow">&dtrif;</span>\n      </div>\n      <div class="keselect__dropdown keselect__dropdown--hide">\n        <div class="keselect__search-wrapper">\n          <input class="keselect__search" type="text" value="" />\n        </div>\n        <div class="keselect__message-wrapper keselect__message-wrapper--hide">\n          <p class="keselect__message"></p>\n        </div>\n        <div class="keselect__option-wrapper"></div>\n      </div>\n    ',e.parentNode.insertBefore(t,e),t.prepend(e);var n=[t.querySelector(".keselect__selected"),t.querySelector(".keselect__dropdown"),t.querySelector(".keselect__search"),t.querySelector(".keselect__message-wrapper"),t.querySelector(".keselect__message"),t.querySelector(".keselect__option-wrapper")],o=n[0],r=n[1],s=n[2],i=n[3],l=n[4],a=n[5],c=window.innerHeight-(t.offsetTop+t.offsetHeight)>240?"bottom":"top";return r.classList.add("keselect__dropdown--".concat(c)),{$container:t,$selected:o,$dropdown:r,$search:s,$messageWrapper:i,$message:l,$optionWrapper:a}}},{key:"_createItemElements",value:function(e){var t=this,n=this._elements,o=n.$origin,r=n.$selected,s=n.$optionWrapper,i=!!this._options.onSearch;s.innerHTML="\n      ".concat(e.map((function(e){var t=e.index,n=e.label,r=e.value,s=!i&&e.index===o.selectedIndex;return'\n          <div \n            class="keselect__option '.concat(s?"keselect__option--selected":"",'"\n            data-index="').concat(t,'"\n            data-label="').concat(n,'"\n            data-value="').concat(r,'"\n          >\n            <p>').concat(n,"</p>\n          </div>\n        ")})).join("\n"),"\n    "),s.querySelectorAll(".keselect__option").forEach((function(e){e.addEventListener("click",(function(){var n=e.dataset,l=n.index,a=n.label,c=n.value,d=""===c,u=s.querySelector(".keselect__option--selected");u&&u.classList.remove("keselect__option--selected"),e.classList.add("keselect__option--selected"),t._showPlaceholder(d),r.textContent=a,i?o.innerHTML='\n            <option value="'.concat(c,'" selected>\n              ').concat(a,"\n            </option>\n          "):o.selectedIndex=l,t._openDropdown(!1)}))}))}},{key:"_removeItemElements",value:function(){this._elements.$optionWrapper.querySelectorAll(".keselect__option").forEach((function(e){return e.remove()}))}},{key:"_openDropdown",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=this._elements.$dropdown,n=this._options,o=n.onDropdownOpen,r=n.onDropdownClose;e?(t.classList.remove("keselect__dropdown--hide"),t.classList.add("keselect__dropdown--show"),o&&o()):(t.classList.remove("keselect__dropdown--show"),t.classList.add("keselect__dropdown--hide"),r&&r())}},{key:"_showMessage",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=this._elements.$messageWrapper;e?(t.classList.remove("keselect__message-wrapper--hide"),t.classList.add("keselect__message-wrapper--show")):(t.classList.remove("keselect__message-wrapper--show"),t.classList.add("keselect__message-wrapper--hide"))}},{key:"_showPlaceholder",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=this._elements.$selected;e?t.classList.add("keselect__selected--placeholder"):t.classList.remove("keselect__selected--placeholder")}},{key:"setValue",value:function(e){if(this._isDestroyed)throw new Error("Instance has been destroyed.");var t=this._elements,n=t.$selected,o=t.$optionWrapper,r=!!this._options.onSearch;if("string"!=typeof e)throw new Error('Value should use "string" as data type.');if(r)throw new Error('Method "setValue" cannot be used when "onSearch" callback used.');var s=this._items.find((function(t){return t.value===e}));if(!s)throw new Error("Options was not found.");var i=o.querySelectorAll(".keselect__option")[s.index],l=o.querySelector(".keselect__option--selected");l&&l.classList.remove("keselect__option--selected"),i.classList.add("keselect__option--selected"),this._showPlaceholder(!e),n.textContent=s.label,this._elements.$origin.selectedIndex=s.index}},{key:"getValue",value:function(){if(this._isDestroyed)throw new Error("Instance has been destroyed.");return this._elements.$origin.value}},{key:"destroy",value:function(){if(this._isDestroyed)throw new Error("Instance has been destroyed.");var e=this._elements,t=e.$container,n=e.$origin;t.parentNode.insertBefore(n,t),t.remove(),this._isDestroyed=!0}}])&&a(t.prototype,n),r&&a(t,r),e}();n(1),t.default=c}]).default}));